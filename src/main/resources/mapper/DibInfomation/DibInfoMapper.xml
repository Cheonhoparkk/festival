<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="today.whatdo.festival.festivalinfo.mapper.DibInformationMapper">
	<sql id="dibInfoCols">
		DI.DI_NUM, DI.DI_ACTIVE, DI.DI_DATE, DI.UI_NUM, DI.FI_NUM
	</sql>
	<select id="selectDibInformationList" resultType="today.whatdo.festival.festivalinfo.vo.dibInfo.DibInfoVO">
		SELECT
		<include refid="dibInfoCols"></include>
		FROM DIB_INFO DI
		<!-- 로그인 상태에서만 찜 리스트 보이기 -->
		INNER JOIN USER_INFO UI ON DI.UI_NUM = UI.UI_NUM
		<where>
			<!-- 0이 되면 찜 리스트에서 제거 -->
			DI.DI_ACTIVE = 1
		</where>
	</select>
	<select id="selectDibInformation" resultType="today.whatdo.festival.festivalinfo.vo.dibInfo.DibInfoVO">
		SELECT
		<include refid="dibInfoCols"></include>
		FROM DIB_INFO DI
		INNER JOIN USER_INFO UI ON DI.UI_NUM = UI.UI_NUM
		WHERE DI.DI_NUM=#{diNum}
	</select>
	<insert id="insertDibInformation" parameterType="today.whatdo.festival.festivalinfo.vo.dibInfo.DibInfoVO">
		INSERT INTO DIB_INFO(
		DI_NUM, DI_ACTIVE, DI_DATE, UI_NUM, FI_NUM
		)
		VALUES(
		#{diNum},#{diActive},#{diDate},#{uiNum},#{fiNum}
		)
	</insert>
</mapper>