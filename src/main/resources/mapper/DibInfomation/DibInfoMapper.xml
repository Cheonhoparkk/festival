<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="today.whatdo.festival.festivalinfo.mapper.DibInformationMapper">
	<sql id="dibInfoCols">
		DI.DI_NUM, DI.DI_ACTIVE, DI.DI_DATE, DI.UI_NUM, DI.FI_NUM
	</sql>
	<select id="selectDibInformationList" resultType="today.whatdo.festival.festivalinfo.vo.dibInfo.DibInfoVO">
		SELECT
		<include refid="dibInfoCols"></include>
		FROM DIB_INFO DI
		<!-- 유저 번호 받아오기 -->
		INNER JOIN USER_INFO UI ON DI.UI_NUM = UI.UI_NUM
		<!-- 찜 번호순으로 정렬 -->
		ORDER BY DI.DI_NUM
	</select>
	<insert id="insertDibInformation" parameterType="today.whatdo.festival.festivalinfo.vo.dibInfo.DibInfoVO">
		INSERT INTO DIB_INFO(
		<include refid="dibInfoCols"></include>
		)
		VALUES(
		#{diNum},#{diActive},DATE_FORMAT(NOW(),'%Y%m%d'),#{uiNum},#{fiNum}
		)
	</insert>
	<delete id="deleteDibInformation">
		DELETE FROM DIB_INFO WHERE DI_NUM=#{diNum}
	</delete>
	<delete id="deleteDibInformations">
		DELETE FROM DIB_INFO WHERE
			<if test='diNums != null and diNums.size != 0'>
				<foreach collection="diNums" item="diNum" separator="OR">
					DI_NUM = #{diNum}
				</foreach>
			</if>
	</delete>
</mapper>